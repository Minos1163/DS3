{
  "trading": {
    "symbols": [
      "ETHUSDT",
      "XRPUSDT",
      "BNBUSDT",
      "SOLUSDT",
      "DOGEUSDT",
      "TRXUSDT",
      "ADAUSDT",
      "BCHUSDT",
      "LINKUSDT",
      "AVAXUSDT",
      "XLMUSDT",
      "SUIUSDT",
      "HBARUSDT",
      "LTCUSDT",
      "DOTUSDT",
      "TONUSDT",
      "SHIBUSDT",
      "UNIUSDT",
      "APTUSDT"
    ],
    "min_leverage": 3,
    "default_leverage": 4,
    "max_leverage": 5,
    "min_position_percent": 12,
    "max_position_percent": 100,
    "reserve_percent": 20
  },
  "risk": {
    "account_circuit_enabled": true,
    "max_daily_loss_percent": 5,
    "max_consecutive_losses": 2,
    "daily_loss_cooldown_seconds": 28800,
    "consecutive_loss_cooldown_seconds": 1800,
    "daily_reset_timezone": "Asia/Shanghai",
    "stop_loss_default_percent": 0.015,
    "take_profit_default_percent": 0.0,
    "conflict_protection": {
      "light_confirm_bars": 2,
      "hard_confirm_bars": 5,
      "cooldown_sec": 180,
      "trend_light_tighten": false,
      "tighten_min_atr_multiple": 2.2,
      "ev_conflict_light_min": 0.14,
      "ev_conflict_hard_min": 0.4,
      "ev_conflict_hard_delta": 0.12,
      "lw_assist_min": 0.2,
      "light_tighten_min_hold_seconds": 600,
      "light_tighten_min_mfe": 0.0025,
      "light_take_profit_enabled": true,
      "light_take_profit_only_range": true,
      "light_take_profit_min_hold_seconds": 600,
      "light_take_profit_min_mfe": 0.004,
      "light_take_profit_min_pnl": 0.0015,
      "light_take_profit_pct": 0.5,
      "breakeven_fee_buffer": 0.001,
      "breakeven_arm_buffer": 0.0005,
      "state_confirm_bars": 3,
      "state_energy_decline_bars": 4,
      "state_structure_break_min": 0.2,
      "state_structure_break_deep": 0.45,
      "state_reduce_pct": 0.2,
      "state_circuit_cvd_norm": 0.92,
      "state_circuit_trap_bars": 4,
      "state_circuit_trap_hard": 0.93,
      "state_circuit_trap_hard_bars": 3,
      "state_circuit_cvd_guard_min": 2,
      "state_circuit_dirscore_min": 0.2,
      "hard_exit_min_hold_seconds": 600,
      "hard_exit_min_mae": 0.0012,
      "hard_exit_trap_force": 0.9,
      "hard_exit_trap_min_confirm_count": 2,
      "hard_exit_drawdown_force_mult": 1.35,
      "hard_exit_new_pos_buffer_enabled": true,
      "hard_exit_new_pos_buffer_minutes": 15,
      "hard_exit_new_pos_hold_mult": 1.5,
      "hard_exit_new_pos_mae_mult": 1.35,
      "hard_exit_new_pos_trap_force": 0.95,
      "hard_exit_new_pos_trap_min_confirm_count": 3,
      "hard_exit_new_pos_drawdown_mult": 1.6
    }
  },
  "strategy": {
    "mode": "FUND_FLOW"
  },
  "fund_flow": {
    "default_target_portion": 0.1,
    "add_position_portion": 0.05,
    "max_symbol_position_portion": 0.15,
    "max_active_symbols": 5,
    "min_open_portion": 0.08,
    "max_open_portion": 1.0,
    "liquidity_norm_factor_weight": 0.12,
    "liquidity_norm_alpha": 0.2,
    "liquidity_norm_clip": 1.0,
    "liquidity_norm_min_base": 1000,
    "microstructure": {
      "zscore_lookback_bars": 120,
      "phantom_spread_k": 100
    },
    "dca_martingale_enabled": true,
    "dca_max_additions": 0,
    "dca_drawdown_thresholds": [
      0.01
    ],
    "dca_multipliers": [
      1.0
    ],
    "min_leverage": 3,
    "default_leverage": 4,
    "max_leverage": 5,
    "strict_leverage_sync": true,
    "price_deviation_limit_percent": 1.0,
    "open_threshold": 0.28,
    "long_open_threshold": 0.3,
    "short_open_threshold": 0.3,
    "close_threshold": 0.3,
    "entry_slippage": 0.0015,
    "stop_loss_pct": 0.015,
    "reverse_close_confirm_bars": 2,
    "reverse_close_score_buffer": 0.02,
    "reverse_close_min_gap": 0.08,
    "reverse_close_no_trade_extra_bars": 1,
    "reverse_close_require_direction_lock": false,
    "take_profit_pct": 0.0,
    "trend_gate_enabled": true,
    "trend_gate_adx_min": 18,
    "trend_gate_atr_pct_min": 0.0012,
    "trend_gate_atr_pct_max": 0.02,
    "extreme_volatility_cooldown_enabled": true,
    "extreme_volatility_cooldown_timeframe": "5m",
    "extreme_volatility_cooldown_atr_pct": 0.02,
    "extreme_volatility_cooldown_consecutive_bars": 2,
    "extreme_volatility_cooldown_seconds": 1800,
    "aggregation_window_seconds": 15,
    "metric_timeframes": [
      "1m",
      "3m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "4h"
    ],
    "decision_timeframe": "15m",
    "entry_side_mode": "BOTH",
    "regime": {
      "timeframe": "15m",
      "adx_trend_on": 21,
      "adx_range_on": 18,
      "adx_no_trade_low": 16,
      "adx_no_trade_high": 19,
      "atr_pct_min": 0.001,
      "atr_pct_max": 0.02,
      "direction_lock_mode": "soft",
      "direction_lock_ema_band_pct": 0.001,
      "direction_lock_soft_adx_buffer": 4.0,
      "ema_fast_period": 20,
      "ema_slow_period": 50
    },
    "ma10_macd_confluence": {
      "enabled": true,
      "tf_exec": "15m",
      "tf_anchor": "1h",
      "ma_period": 10,
      "macd_fast": 12,
      "macd_slow": 26,
      "macd_signal": 9,
      "kline_limit_exec": 160,
      "kline_limit_anchor": 80,
      "entry_hard_filter": true,
      "entry_require_macd_trigger": true,
      "block_on_opposite_bias": false,
      "buy_cross": "GOLDEN",
      "sell_cross": "DEAD",
      "buy_block_zone": "BELOW_ZERO",
      "sell_block_zone": "ABOVE_ZERO",
      "neutral_bias_mode": "degrade",
      "neutral_bias_portion_scale": 0.6,
      "neutral_bias_leverage_cap": 2,
      "bias_boost": 0.12,
      "bias_penalty": 0.1,
      "cross_boost": 0.06,
      "zone_boost": 0.04,
      "hist_boost": 0.03,
      "max_adjust": 0.25,
      "exit_anchor_enabled": true,
      "exit_anchor_require_hist_expand": true,
      "exit_anchor_skip_on_hard_block": true
    },
    "range_quantile": {
      "enabled": true,
      "timeframe": "5m",
      "lookback_minutes": 90,
      "min_samples": 4,
      "q_hi": 0.9,
      "q_lo": 0.1,
      "metrics": [
        "imbalance",
        "cvd_momentum",
        "phantom_mean",
        "trap_last",
        "micro_delta_last"
      ],
      "winsor_clip": 3.0,
      "turn_confirm": {
        "enabled": true,
        "mode": "2bar_peak_valley",
        "min_delta": 5e-05,
        "micro_turn_enabled": true,
        "phantom_decay_enabled": true,
        "trap_decay_enabled": true,
        "min_pass_count": 2
      },
      "trap_guard": {
        "enabled": true,
        "max_quantile": 0.7
      }
    },
    "engine_params": {
      "TREND": {
        "max_active_symbols": 5,
        "default_target_portion": 0.1,
        "add_position_portion": 0.05,
        "max_symbol_position_portion": 0.15,
        "default_leverage": 4,
        "max_leverage": 5,
        "min_leverage": 3,
        "long_open_threshold": 0.3,
        "short_open_threshold": 0.3,
        "close_threshold": 0.3,
        "take_profit_pct": 0.0,
        "stop_loss_pct": 0.015,
        "dca_max_additions": 0,
        "dca_drawdown_thresholds": [
          0.01
        ],
        "dca_multipliers": [
          1.0
        ],
        "signal_pool_id": "trend_pool"
      },
      "RANGE": {
        "max_active_symbols": 5,
        "default_target_portion": 0.08,
        "add_position_portion": 0.0,
        "max_symbol_position_portion": 0.1,
        "default_leverage": 4,
        "max_leverage": 5,
        "min_leverage": 3,
        "long_open_threshold": 0.36,
        "short_open_threshold": 0.36,
        "close_threshold": 0.55,
        "take_profit_pct": 0.0,
        "stop_loss_pct": 0.015,
        "dca_max_additions": 0,
        "signal_pool_id": "range_pool"
      }
    },
    "active_signal_pool_id": "AUTO",
    "major_symbol_signal_pool": {
      "enabled": true,
      "symbols": [
        "BTCUSDT",
        "ETHUSDT",
        "BNBUSDT"
      ],
      "trend_pool_id": "trend_pool_major"
    },
    "signal_definitions": [
      {
        "id": "trend_long_cvd",
        "signal_name": "trend_long_cvd",
        "side": "LONG",
        "metric": "cvd_momentum",
        "operator": ">=",
        "threshold": 0.0005,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "trend_long_imb",
        "signal_name": "trend_long_imb",
        "side": "LONG",
        "metric": "imbalance",
        "operator": ">=",
        "threshold": 0.06,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "trend_short_cvd",
        "signal_name": "trend_short_cvd",
        "side": "SHORT",
        "metric": "cvd_momentum",
        "operator": "<=",
        "threshold": -0.0005,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "trend_short_imb",
        "signal_name": "trend_short_imb",
        "side": "SHORT",
        "metric": "imbalance",
        "operator": "<=",
        "threshold": -0.06,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "trend_major_long_cvd",
        "signal_name": "trend_major_long_cvd",
        "side": "LONG",
        "metric": "cvd_momentum",
        "operator": ">=",
        "threshold": 0.0003,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "trend_major_long_imb",
        "signal_name": "trend_major_long_imb",
        "side": "LONG",
        "metric": "imbalance",
        "operator": ">=",
        "threshold": 0.045,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "trend_major_short_cvd",
        "signal_name": "trend_major_short_cvd",
        "side": "SHORT",
        "metric": "cvd_momentum",
        "operator": "<=",
        "threshold": -0.0003,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "trend_major_short_imb",
        "signal_name": "trend_major_short_imb",
        "side": "SHORT",
        "metric": "imbalance",
        "operator": "<=",
        "threshold": -0.045,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "range_long_extreme",
        "signal_name": "range_long_extreme",
        "side": "LONG",
        "metric": "imbalance",
        "operator": "<=",
        "threshold": -0.14,
        "timeframe": "5m",
        "enabled": true
      },
      {
        "id": "range_short_extreme",
        "signal_name": "range_short_extreme",
        "side": "SHORT",
        "metric": "imbalance",
        "operator": ">=",
        "threshold": 0.14,
        "timeframe": "5m",
        "enabled": true
      }
    ],
    "signal_pools": [
      {
        "id": "trend_pool",
        "pool_name": "trend_pool",
        "enabled": true,
        "logic": "AND",
        "min_pass_count": 0,
        "min_long_score": 0.11,
        "min_short_score": 0.11,
        "scheduled_trigger_bypass": true,
        "apply_when_position_exists": false,
        "edge_trigger_enabled": true,
        "edge_cooldown_seconds": 300,
        "symbols": [],
        "signal_ids": [
          "trend_long_cvd",
          "trend_long_imb",
          "trend_short_cvd",
          "trend_short_imb"
        ]
      },
      {
        "id": "trend_pool_major",
        "pool_name": "trend_pool_major",
        "enabled": true,
        "logic": "OR",
        "min_pass_count": 1,
        "min_long_score": 0.12,
        "min_short_score": 0.12,
        "scheduled_trigger_bypass": true,
        "apply_when_position_exists": false,
        "edge_trigger_enabled": false,
        "edge_cooldown_seconds": 60,
        "symbols": [],
        "signal_ids": [
          "trend_major_long_cvd",
          "trend_major_long_imb",
          "trend_major_short_cvd",
          "trend_major_short_imb"
        ]
      },
      {
        "id": "range_pool",
        "pool_name": "range_pool",
        "enabled": true,
        "logic": "AND",
        "min_pass_count": 0,
        "min_long_score": 0.33,
        "min_short_score": 0.33,
        "scheduled_trigger_bypass": true,
        "apply_when_position_exists": false,
        "edge_trigger_enabled": true,
        "edge_cooldown_seconds": 300,
        "symbols": [],
        "signal_ids": [
          "range_long_extreme",
          "range_short_extreme"
        ]
      }
    ],
    "trigger_dedupe_seconds": 30,
    "signal_pool": {
      "enabled": true,
      "logic": "AND",
      "min_long_score": 0.17,
      "min_short_score": 0.17,
      "min_pass_count": 0,
      "scheduled_trigger_bypass": true,
      "apply_when_position_exists": false,
      "edge_trigger_enabled": true,
      "edge_cooldown_seconds": 300,
      "symbols": [],
      "rules": [
        {
          "name": "trend_long_cvd",
          "side": "LONG",
          "metric": "cvd_momentum",
          "operator": ">=",
          "threshold": 0.0005
        },
        {
          "name": "trend_long_imb",
          "side": "LONG",
          "metric": "imbalance",
          "operator": ">=",
          "threshold": 0.06
        },
        {
          "name": "trend_short_cvd",
          "side": "SHORT",
          "metric": "cvd_momentum",
          "operator": "<=",
          "threshold": -0.0005
        },
        {
          "name": "trend_short_imb",
          "side": "SHORT",
          "metric": "imbalance",
          "operator": "<=",
          "threshold": -0.06
        }
      ]
    },
    "execution_degradation": {
      "open_ioc_retry_times": 3,
      "open_ioc_retry_step_bps": 15,
      "open_gtc_fallback_enabled": true,
      "open_market_fallback_enabled": false,
      "close_ioc_retry_times": 1,
      "close_ioc_retry_step_bps": 5,
      "close_gtc_fallback_enabled": false,
      "close_market_fallback_enabled": true
    },
    "rollback_on_tp_sl_fail": true,
    "protection_sla_enabled": true,
    "protection_sla_seconds": 45,
    "protection_sla_force_flatten": true,
    "protection_immediate_close_on_repair_fail": true,
    "protection_sla_alert_cooldown_seconds": 15,
    "pretrade_risk_gate": {
      "enabled": true,
      "force_exit_on_gate": true,
      "entry_block_actions": [
        "EXIT",
        "BLOCK",
        "AVOID"
      ],
      "entry_hold_portion_scale": 0.6,
      "entry_hold_leverage_cap": 2,
      "exit_close_ratio": 0.5,
      "exit_score_threshold": 0.12,
      "exit_confirm_bars": 2,
      "exit_min_hold_seconds": 900,
      "exit_require_price_followthrough": true,
      "exit_price_change_min": 0.002,
      "exit_drawdown_override": 0.015,
      "entry_threshold": 0.32,
      "max_drawdown": 0.02,
      "max_exposure_per_trade": 0.22,
      "volatility_cap": 0.012,
      "momentum_scale": 260,
      "trend_weight": 0.45,
      "momentum_weight": 0.3,
      "volatility_weight": 0.2,
      "drawdown_weight": 0.35
    },
    "deepseek_weight_router": {
      "enabled": true,
      "ai_enabled": false,
      "cache_ttl_seconds": 300,
      "cache_max_entries": 100,
      "volatility_adjustment_factor": 0.2,
      "microstructure_boost_factor": 0.1,
      "flow_trend_weight_boost": 0.1
    },
    "deepseek_ai": {
      "enabled": false,
      "api_url": "https://api.deepseek.com/v1/chat/completions",
      "model": "deepseek-chat",
      "timeout": 15,
      "max_retries": 2,
      "cache_ttl": 300,
      "default_weights": {
        "trend_cvd": 0.24,
        "trend_cvd_momentum": 0.14,
        "trend_oi_delta": 0.22,
        "trend_funding": 0.1,
        "trend_depth_ratio": 0.15,
        "trend_imbalance": 0.1,
        "trend_liquidity_delta": 0.08,
        "trend_micro_delta": 0.06,
        "range_cvd": 0.1,
        "range_cvd_momentum": 0.15,
        "range_oi_delta": 0.05,
        "range_funding": 0.05,
        "range_depth_ratio": 0.1,
        "range_imbalance": 0.35,
        "range_liquidity_delta": 0.12,
        "range_micro_delta": 0.18
      }
    },
    "score_fusion": {
      "enabled": true,
      "score_15m_weight": 0.4,
      "consistency_window": 3
    }
  },
  "schedule": {
    "interval_seconds": 60,
    "symbols_per_cycle": 22,
    "symbols_per_cycle_prioritize_positions": true,
    "align_to_kline_close": true,
    "kline_close_delay_seconds": 3,
    "max_cycle_runtime_seconds": 45,
    "symbol_stagger_seconds": 0.15,
    "retry_times": 3,
    "retry_delay_seconds": 20,
    "download_delay_seconds": 5
  },
  "network": {
    "force_direct": true,
    "disable_proxy": true
  },
  "startup": {
    "live_confirmation_enabled": false
  }
}
